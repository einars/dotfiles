#!/usr/bin/env zsh

function svc-restart
{
    if [[ `uname` == 'SunOS' ]] {
        pfexec svcadm restart $1
    } elif [[ -f /etc/rc.d/$1 ]] {
        sudo /etc/rc.d/$1 restart
    } elif [[ -f /etc/init.d/$1 ]] {
        sudo /etc/init.d/$1 restart
    } else {
        return -1
    }
}


SERVICE=$1
notify-send -t 1000 -u normal -h int:x:10 -h int:y:0 "$SERVICE restarting..."
svc-restart $SERVICE
if [[ $? == 0 ]] {
    notify-send -t 1500 -u normal -h int:x:10 -h int:y:0 "$SERVICE restarted"
} else {
    notify-send -t 1500 -u critical -h int:x:10 -h int:y:0 "$SERVICE failed to restart"
}

