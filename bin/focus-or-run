#!/usr/bin/env zsh

SCRIPT=$0

function usage()
{
    echo Usage: `basename $SCRIPT` window_class_or_title [cmd_to_exec]
    echo Example: `basename $SCRIPT` firefox /usr/bin/firefox
    exit -1
}

function focus()
{
    wmctrl -a $1 || wmctrl -x -a $1
}

CLASS_OR_TITLE=$1
COMMAND_TO_EXEC=$2

[[ -z $CLASS_OR_TITLE ]] && usage

focus $CLASS_OR_TITLE || { 
    if [[ $COMMAND_TO_EXEC != "" ]] {
        $COMMAND_TO_EXEC &
        sleep 0.3
        focus $CLASS_OR_TITLE
    }
}
