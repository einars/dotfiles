#!/bin/sh

have_apple_kbd=$(lsusb | grep 'Aluminum Keyboard')

if [ "$have_apple_kbd" = "" ]
then
  echo 'rekey: using default keyboard settings'
  setxkbmap lv -option ctrl:nocaps
else
  echo 'rekey: using Apple keyboard modifications'
  setxkbmap lv -option ctrl:nocaps  -option altwin:swap_lalt_lwin
  echo '
! bring some apple keys in order
keycode 94 = grave asciitilde grave asciitilde asciitilde
remove mod4 = Super_R
keycode 134 = ISO_Level3_Shift NoSymbol ISO_Level3_Shift
keycode 108 = Mode_switch NoSymbol Mode_switch
  ' | xmodmap -
fi


echo '


! altgr-p □  altgr-shift-p = ■
!
! vim-style-arrows
! altgr-5 ←  altgr-shift-5 = ◀
! altgr-6 ↓  altgr-shift-6 = ▼
! altgr-7 ↑  altgr-shift-7 = ▲
! altgr-8 →  altgr-shift-8 = ▶

! zerosuperior ⁰

keycode 10 = 1 exclam      NoSymbol NoSymbol onesuperior   onesubscript
keycode 11 = 2 at          NoSymbol NoSymbol twosuperior   twosubscript
keycode 12 = 3 numbersign  NoSymbol NoSymbol threesuperior threesubscript
keycode 13 = 4 dollar      NoSymbol NoSymbol EuroSign      cent
keycode 14 = 5 percent     NoSymbol NoSymbol U2190         U25C2
keycode 15 = 6 asciicircum NoSymbol NoSymbol U2193         U25BE
keycode 16 = 7 ampersand   NoSymbol NoSymbol U2191         U25B4
keycode 17 = 8 asterisk    NoSymbol NoSymbol U2192         U25B8
keycode 18 = 9 parenleft   NoSymbol NoSymbol bracketright  plusminus
keycode 19 = 0 parenright  NoSymbol NoSymbol zerosuperior  degree

keycode 33 = p P           NoSymbol NoSymbol U25A1         U25A0

! altgr , = ,·○
keycode 59 = comma less    NoSymbol NoSymbol periodcentered U25CF
! altgr . = .·○
keycode 60 = period greater NoSymbol NoSymbol periodcentered U25CB

! altgr-minus gets typographical minus
keycode 20 = minus underscore NoSymbol NoSymbol U2212 U2212

' | xmodmap -
