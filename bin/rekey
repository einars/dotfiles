#!/bin/sh

have_apple_kbd=$(lsusb | grep 'Aluminum Keyboard')
have_ms_kbd=$(lsusb | grep 'Microsoft Corp. Nano') # Ms Wireless 3000
have_ms_kbd=

if [ "$have_apple_kbd" != "" ]; then

  echo 'rekey: using Apple keyboard modifications'
  setxkbmap lv  -option altwin:swap_lalt_lwin
  echo '
! bring some apple keys in order
keycode 94 = grave asciitilde grave asciitilde asciitilde
remove mod4 = Super_R
keycode 134 = ISO_Level3_Shift NoSymbol ISO_Level3_Shift
!keycode 108 = Mode_switch NoSymbol Mode_switch
  ' | xmodmap -

else if [ "$have_ms_kbd" != "" ]; then

    echo 'rekey: using MS Wireless 3000 keyboard modifications'
    setxkbmap lv
    echo '
! menu as a copy of escape:
! wireless desktop 3000 has a dumb tiny escape
keycode 135 = Escape NoSymbol Escape
    ' | xmodmap -

  else

    setxkbmap lv -option ctrl:nocaps

  fi
fi



echo '


! vim-style-arrows
! altgr-5 ←  altgr-shift-5 = ◀
! altgr-6 ↓  altgr-shift-6 = ▼
! altgr-7 ↑  altgr-shift-7 = ▲
! altgr-8 →  altgr-shift-8 = ▶

! zerosuperior ⁰

keycode 10 = 1 exclam      NoSymbol NoSymbol onesubscript onesuperior
keycode 11 = 2 at          NoSymbol NoSymbol twosubscript twosuperior
keycode 12 = 3 numbersign  NoSymbol NoSymbol threesubscript threesuperior
keycode 13 = 4 dollar      NoSymbol NoSymbol EuroSign      cent
keycode 14 = 5 percent     NoSymbol NoSymbol U2190         U25C2
keycode 15 = 6 asciicircum NoSymbol NoSymbol U2193         U25BE
keycode 16 = 7 ampersand   NoSymbol NoSymbol U2191         U25B4
keycode 17 = 8 asterisk    NoSymbol NoSymbol U2192         U25B8
keycode 18 = 9 parenleft   NoSymbol NoSymbol bracketright  plusminus
keycode 19 = 0 parenright  NoSymbol NoSymbol zerosuperior  degree

! altgr p = pi
keycode 33 = p P NoSymbol NoSymbol U03C0 U03C0
! altgr f = latin f with hook, ƒ Ƒ
keycode 41 = f F NoSymbol NoSymbol U0192 U0191
! altgr h = ohm sign
keycode 43 = h H NoSymbol NoSymbol U2126 U2126
! altgr o = ω Ω
keycode 32 = o O NoSymbol NoSymbol U03C9 U03A9

! altgr x = ☆ ★
keycode 53 = x X NoSymbol NoSymbol U2606 U2605
! altgr y = ⚓☘
keycode 29 = y Y NoSymbol NoSymbol U2693 U2618 

! altgr , = ×□
keycode 59 = comma less    NoSymbol NoSymbol multiply U25A1
! altgr . = ·■
keycode 60 = period greater NoSymbol NoSymbol periodcentered U25A0

! altgr-minus gets typographical minus
keycode 20 = minus underscore NoSymbol NoSymbol U2212 U2212

! clear Lock
! keycode 0x42 = Escape
' | xmodmap -


xset r rate 200 30
