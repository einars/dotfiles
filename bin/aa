#!/usr/bin/env fish

# deprecated with the rise of the platinum searcher, pt

# vim: set syn=fish :

# ag search, but:
# 1. case-insenstitive with forced regexp, to workaround a comparison bug w/diacritical chars,
# 2. all params searched, no need to quote: aa i went home -> searches for "i went home"

set n_args (count $argv)
if [ n_args = 0 ]
    echo "aa [stuff-to-search] [folder]"
else

    # the last argument will be treated as a folder, if a folder by that name exists
    if test -d $argv[-1]
        set folder $argv[-1]
        set -e argv[-1]
    end

    set search_string "$argv"
    clear

    #if test -d .git
      #set folder (git ls-files $folder)
    #end

    pt --smart-case --context 2 $case_mode $search_string $folder
end
